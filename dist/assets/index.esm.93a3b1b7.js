import{m as y,u as m,q as E,x as ne,y as O,z as P,A as re,B as se,D as I,G as ae,H as S,I as D,J as le,K as z}from"./index.06d337ed.js";function B(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Object.keys(t).reduce((n,r)=>(s.includes(r)||(n[r]=m(t[r])),n),{})}function j(t){return typeof t=="function"}function ue(t){return re(t)||se(t)}function W(t,s,n,r){return t.call(r,m(s),m(n),r)}function q(t){return t.$valid!==void 0?!t.$valid:!t}function oe(t,s,n,r,a,d,v){let{$lazy:u,$rewardEarly:i}=a,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:[],o=arguments.length>8?arguments[8]:void 0,$=arguments.length>9?arguments[9]:void 0,h=arguments.length>10?arguments[10]:void 0;const g=E(!!r.value),e=E(0);n.value=!1;const l=O([s,r].concat(f,h),()=>{if(u&&!r.value||i&&!$.value&&!n.value)return;let c;try{c=W(t,s,o,v)}catch(R){c=Promise.reject(R)}e.value++,n.value=!!e.value,g.value=!1,Promise.resolve(c).then(R=>{e.value--,n.value=!!e.value,d.value=R,g.value=q(R)}).catch(R=>{e.value--,n.value=!!e.value,d.value=R,g.value=!0})},{immediate:!0,deep:typeof s=="object"});return{$invalid:g,$unwatch:l}}function ie(t,s,n,r,a,d,v,u){let{$lazy:i,$rewardEarly:f}=r;const o=()=>({}),$=y(()=>{if(i&&!n.value||f&&!u.value)return!1;let h=!0;try{const g=W(t,s,v,d);a.value=g,h=q(g)}catch(g){a.value=g}return h});return{$unwatch:o,$invalid:$}}function ce(t,s,n,r,a,d,v,u,i,f,o){const $=E(!1),h=t.$params||{},g=E(null);let e,l;t.$async?{$invalid:e,$unwatch:l}=oe(t.$validator,s,$,n,r,g,a,t.$watchTargets,i,f,o):{$invalid:e,$unwatch:l}=ie(t.$validator,s,n,r,g,a,i,f);const c=t.$message;return{$message:j(c)?y(()=>c(B({$pending:$,$invalid:e,$params:B(h),$model:s,$response:g,$validator:d,$propertyPath:u,$property:v}))):c||"",$params:h,$pending:$,$invalid:e,$response:g,$unwatch:l}}function de(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const s=m(t),n=Object.keys(s),r={},a={},d={};return n.forEach(v=>{const u=s[v];switch(!0){case j(u.$validator):r[v]=u;break;case j(u):r[v]={$validator:u};break;case v.startsWith("$"):d[v]=u;break;default:a[v]=u}}),{rules:r,nestedValidators:a,config:d}}function $e(){}const ve="__root";function G(t,s,n){if(n)return s?s(t()):t();try{var r=Promise.resolve(t());return s?r.then(s):r}catch(a){return Promise.reject(a)}}function fe(t,s){return G(t,$e,s)}function me(t,s){var n=t();return n&&n.then?n.then(s):s(n)}function ge(t){return function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];try{return Promise.resolve(t.apply(this,s))}catch(r){return Promise.reject(r)}}}function he(t,s,n,r,a,d,v,u,i){const f=Object.keys(t),o=r.get(a,t),$=E(!1),h=E(!1),g=E(0);if(o){if(!o.$partial)return o;o.$unwatch(),$.value=o.$dirty.value}const e={$dirty:$,$path:a,$touch:()=>{$.value||($.value=!0)},$reset:()=>{$.value&&($.value=!1)},$commit:()=>{}};return f.length?(f.forEach(l=>{e[l]=ce(t[l],s,e.$dirty,d,v,l,n,a,i,h,g)}),e.$externalResults=y(()=>u.value?[].concat(u.value).map((l,c)=>({$propertyPath:a,$property:n,$validator:"$externalResults",$uid:`${a}-externalResult-${c}`,$message:l,$params:{},$response:null,$pending:!1})):[]),e.$invalid=y(()=>{const l=f.some(c=>m(e[c].$invalid));return h.value=l,!!e.$externalResults.value.length||l}),e.$pending=y(()=>f.some(l=>m(e[l].$pending))),e.$error=y(()=>e.$dirty.value?e.$pending.value||e.$invalid.value:!1),e.$silentErrors=y(()=>f.filter(l=>m(e[l].$invalid)).map(l=>{const c=e[l];return I({$propertyPath:a,$property:n,$validator:l,$uid:`${a}-${l}`,$message:c.$message,$params:c.$params,$response:c.$response,$pending:c.$pending})}).concat(e.$externalResults.value)),e.$errors=y(()=>e.$dirty.value?e.$silentErrors.value:[]),e.$unwatch=()=>f.forEach(l=>{e[l].$unwatch()}),e.$commit=()=>{h.value=!0,g.value=Date.now()},r.set(a,t,e),e):(o&&r.set(a,t,e),e)}function ye(t,s,n,r,a,d,v){const u=Object.keys(t);return u.length?u.reduce((i,f)=>(i[f]=L({validations:t[f],state:s,key:f,parentKey:n,resultsCache:r,globalConfig:a,instance:d,externalResults:v}),i),{}):{}}function pe(t,s,n){const r=y(()=>[s,n].filter(e=>e).reduce((e,l)=>e.concat(Object.values(m(l))),[])),a=y({get(){return t.$dirty.value||(r.value.length?r.value.every(e=>e.$dirty):!1)},set(e){t.$dirty.value=e}}),d=y(()=>{const e=m(t.$silentErrors)||[],l=r.value.filter(c=>(m(c).$silentErrors||[]).length).reduce((c,R)=>c.concat(...R.$silentErrors),[]);return e.concat(l)}),v=y(()=>{const e=m(t.$errors)||[],l=r.value.filter(c=>(m(c).$errors||[]).length).reduce((c,R)=>c.concat(...R.$errors),[]);return e.concat(l)}),u=y(()=>r.value.some(e=>e.$invalid)||m(t.$invalid)||!1),i=y(()=>r.value.some(e=>m(e.$pending))||m(t.$pending)||!1),f=y(()=>r.value.some(e=>e.$dirty)||r.value.some(e=>e.$anyDirty)||a.value),o=y(()=>a.value?i.value||u.value:!1),$=()=>{t.$touch(),r.value.forEach(e=>{e.$touch()})},h=()=>{t.$commit(),r.value.forEach(e=>{e.$commit()})},g=()=>{t.$reset(),r.value.forEach(e=>{e.$reset()})};return r.value.length&&r.value.every(e=>e.$dirty)&&$(),{$dirty:a,$errors:v,$invalid:u,$anyDirty:f,$error:o,$pending:i,$touch:$,$reset:g,$silentErrors:d,$commit:h}}function L(t){const s=ge(function(){return b(),me(function(){if(l.$rewardEarly)return F(),fe(z)},function(){return G(z,function(){return new Promise(p=>{if(!V.value)return p(!x.value);const C=O(V,()=>{p(!x.value),C()})})})})});let{validations:n,state:r,key:a,parentKey:d,childResults:v,resultsCache:u,globalConfig:i={},instance:f,externalResults:o}=t;const $=d?`${d}.${a}`:a,{rules:h,nestedValidators:g,config:e}=de(n),l=Object.assign({},i,e),c=a?y(()=>{const p=m(r);return p?m(p[a]):void 0}):r,R=Object.assign({},m(o)||{}),T=y(()=>{const p=m(o);return a?p?m(p[a]):void 0:p}),A=he(h,c,a,u,$,l,f,T,r),k=ye(g,c,$,u,l,f,T),{$dirty:w,$errors:U,$invalid:x,$anyDirty:K,$error:Q,$pending:V,$touch:b,$reset:X,$silentErrors:Y,$commit:F}=pe(A,k,v),Z=a?y({get:()=>m(c),set:p=>{w.value=!0;const C=m(r),N=m(o);N&&(N[a]=R[a]),P(C[a])?C[a].value=p:C[a]=p}}):null;a&&l.$autoDirty&&O(c,()=>{w.value||b();const p=m(o);p&&(p[a]=R[a])},{flush:"sync"});function ee(p){return(v.value||{})[p]}function te(){P(o)?o.value=R:Object.keys(R).length===0?Object.keys(o).forEach(p=>{delete o[p]}):Object.assign(o,R)}return I(Object.assign({},A,{$model:Z,$dirty:w,$error:Q,$errors:U,$invalid:x,$anyDirty:K,$pending:V,$touch:b,$reset:X,$path:$||ve,$silentErrors:Y,$validate:s,$commit:F},v&&{$getResultsForChild:ee,$clearExternalResults:te},k))}class Re{constructor(){this.storage=new Map}set(s,n,r){this.storage.set(s,{rules:n,result:r})}checkRulesValidity(s,n,r){const a=Object.keys(r),d=Object.keys(n);return d.length!==a.length||!d.every(u=>a.includes(u))?!1:d.every(u=>n[u].$params?Object.keys(n[u].$params).every(i=>m(r[u].$params[i])===m(n[u].$params[i])):!0)}get(s,n){const r=this.storage.get(s);if(!r)return;const{rules:a,result:d}=r,v=this.checkRulesValidity(s,n,a),u=d.$unwatch?d.$unwatch:()=>({});return v?d:{$dirty:d.$dirty,$partial:!0,$unwatch:u}}}const _={COLLECT_ALL:!0,COLLECT_NONE:!1},M=Symbol("vuelidate#injectChildResults"),H=Symbol("vuelidate#removeChildResults");function Ee(t){let{$scope:s,instance:n}=t;const r={},a=E([]),d=y(()=>a.value.reduce((o,$)=>(o[$]=m(r[$]),o),{}));function v(o,$){let{$registerAs:h,$scope:g,$stopPropagation:e}=$;e||s===_.COLLECT_NONE||g===_.COLLECT_NONE||s!==_.COLLECT_ALL&&s!==g||(r[h]=o,a.value.push(h))}n.__vuelidateInjectInstances=[].concat(n.__vuelidateInjectInstances||[],v);function u(o){a.value=a.value.filter($=>$!==o),delete r[o]}n.__vuelidateRemoveInstances=[].concat(n.__vuelidateRemoveInstances||[],u);const i=S(M,[]);D(M,n.__vuelidateInjectInstances);const f=S(H,[]);return D(H,n.__vuelidateRemoveInstances),{childResults:d,sendValidationResultsToParent:i,removeValidationResultsFromParent:f}}function J(t){return new Proxy(t,{get(s,n){return typeof s[n]=="object"?J(s[n]):y(()=>s[n])}})}function Oe(t,s){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};arguments.length===1&&(n=t,t=void 0,s=void 0);let{$registerAs:r,$scope:a=_.COLLECT_ALL,$stopPropagation:d,$externalResults:v,currentVueInstance:u}=n;const i=u||le(),f=i?i.proxy.$options:{};!r&&i&&(r=`_vuelidate_${i.uid||i._uid}`);const o=E({}),$=new Re,{childResults:h,sendValidationResultsToParent:g,removeValidationResultsFromParent:e}=i?Ee({$scope:a,instance:i}):{childResults:E({})};if(!t&&f.validations){const l=f.validations;s=E({}),ne(()=>{s.value=i.proxy,O(()=>j(l)?l.call(s.value,new J(s.value)):l,c=>{o.value=L({validations:c,state:s,childResults:h,resultsCache:$,globalConfig:n,instance:i.proxy,externalResults:v||i.proxy.vuelidateExternalResults})},{immediate:!0})}),n=f.validationsConfig||n}else{const l=P(t)||ue(t)?t:I(t||{});O(l,c=>{o.value=L({validations:c,state:s,childResults:h,resultsCache:$,globalConfig:n,instance:i?i.proxy:{},externalResults:v})},{immediate:!0})}return i&&(g.forEach(l=>l(o,{$registerAs:r,$scope:a,$stopPropagation:d})),ae(()=>e.forEach(l=>l(r)))),y(()=>Object.assign({},m(o.value),h.value))}export{Oe as u};
