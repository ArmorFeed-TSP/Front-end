var D=Object.defineProperty;var C=(t,e,n)=>e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var v=(t,e,n)=>(C(t,typeof e!="symbol"?e+"":e,n),n);import{h as f,L as b,_ as O,r as c,o as P,c as j,b as l,w as o,a as r,n as V,k as y,v as w,t as u,j as h,p as k,e as I}from"./index.06d337ed.js";import{u as U}from"./index.esm.93a3b1b7.js";class A{constructor(){v(this,"endPoint","/enterprises")}getAll(){return f.get(this.endPoint,b())}getById(e){return f.get(`${this.endPoint}/${e}`,b())}}var L=new A;const q={name:"business-shipping",setup:()=>({v$:U()}),data(){return{submitted:!1,quantity:null,weight:null,selectedFilter:null,sortOrder:null,sortField:null,formObject:{},enterprise:null,enterprises:[],errors:[],months:["January","February","March","April","April","April","April","August","September","October","November","December"],priceFilter:[{label:"High prices",code:"HP",value:"!price"},{label:"Low prices",code:"LP",value:"price"}],qualityFilter:[{label:"High quality service",code:"HQ",value:"!ratingService"},{label:"Low quality service",code:"LQ",value:"ratingService"}]}},methods:{onRowSelect(t){this.$toast.add({severity:"info",summary:"Company Selected",detail:"Name: "+t.data.name,life:3e3})},onSortChange(t){const e=t.value.value,n=t.value;e.indexOf("!")===0?(this.sortOrder=-1,this.sortField=e.substring(1,e.length),this.selectedFilter=n):(this.sortOrder=1,this.sortField=e,this.selectedFilter=n)},onRowUnselect(t){this.$toast.add({severity:"warn",summary:"Company Unselected",detail:"Name: "+t.data.name,life:3e3})},nextPage(){this.submitted=!0,this.validateForm()&&this.$emit("next-page",{formData:{enterpriseId:this.enterprise.id,pickUpDate:this.getPickUpDate(),deliveryDate:this.enterprise.dateShipment,amount:this.enterprise.price,status:"Pending"},pageIndex:1})},prevPage(){this.submitted=!1,this.$emit("prev-page",{pageIndex:1})},validateForm(){return this.enterprise!=null},async getAllEnterprises(){await L.getAll().then(t=>{t.data.forEach(e=>{e.price=this.getPrice(e),e.dateShipment=this.getDateShipment(e)}),this.enterprises=t.data}).catch(t=>{this.errors.push(t)})},getWeight(){const t=this.formObject.height,e=this.formObject.width,n=this.formObject.length,d=this.formObject.weight;let s=t*e*n/5e3;return d>s?d:s},getPrice(t){const e=this.formObject.quantity,n=t.priceBase,d=t.factorWeight;let s=e*(n+d*this.weight);return Number(s.toFixed(2))},getDateShipment(t){let e=new Date;return e.setSeconds(t.shippingTime*3600),e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()},getPickUpDate(){let t=new Date;return t.setSeconds(1*86400),t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()},getDateShipmentInFormat(t){let e=new Date(t);return e.getDate()+" of "+this.months[e.getMonth()]},formatCurrency(t){return t.toLocaleString("en-US",{style:"currency",currency:"USD"})}},mounted(){this.$nextTick(()=>{this.formObject=JSON.parse(localStorage.getItem("formObject")),this.weight=this.getWeight(),this.getAllEnterprises()})}},m=t=>(k("data-v-dc9030e6"),t=t(),I(),t),B={class:"flex justify-content-center"},N=m(()=>r("div",{class:"text-center"},"Select a enterprise",-1)),E=m(()=>r("div",{class:"text-center"}," depending on the quality of service or shipping costs ",-1)),H={class:"pb-4"},M=m(()=>r("div",{class:"m-2"},[r("label",{class:"font-bold",for:"filter"},"Filters")],-1)),W={class:"p-fluid md:flex justify-content-between"},Q={class:"pb-4"},R={class:"m-2"},T=h("Business "),J={class:"p-error"},Y={class:"inline-flex justify-content-center align-items-center"},z=["src","alt"],K={class:"flex justify-content-end m-2"},G={class:"p-error"},X={class:"flex justify-content-between my-2"};function Z(t,e,n,d,s,a){const g=c("pv-dropdown"),p=c("pv-column"),S=c("pv-rating"),F=c("pv-data-table"),_=c("pv-button"),x=c("pv-card");return P(),j("div",B,[l(x,{class:"border-none shadow-none bg-transparent w-full"},{title:o(()=>[N]),subtitle:o(()=>[E]),content:o(()=>[r("div",H,[M,r("div",W,[l(g,{modelValue:s.selectedFilter,"onUpdate:modelValue":e[0]||(e[0]=i=>s.selectedFilter=i),options:s.priceFilter,optionLabel:"label",placeholder:"Prices",class:"md:w-full m-2",onChange:e[1]||(e[1]=i=>a.onSortChange(i))},null,8,["modelValue","options"]),l(g,{modelValue:s.selectedFilter,"onUpdate:modelValue":e[2]||(e[2]=i=>s.selectedFilter=i),options:s.qualityFilter,optionLabel:"label",placeholder:"Quality service",class:"md:w-full m-2",onChange:e[3]||(e[3]=i=>a.onSortChange(i))},null,8,["modelValue","options"])])]),r("div",Q,[r("div",R,[r("label",{for:"business",class:V(["font-bold",{"p-error":!s.enterprise&&s.submitted}])},[T,y(r("small",J,"(*)",512),[[w,!s.enterprise&&s.submitted]])],2)]),r("div",null,[l(F,{value:s.enterprises,paginator:!0,rows:5,class:"m-2 border-round",selection:s.enterprise,"onUpdate:selection":e[4]||(e[4]=i=>s.enterprise=i),selectionMode:"single",dataKey:"id",responsiveLayout:"scroll",sortOrder:s.sortOrder,sortField:s.sortField},{default:o(()=>[l(p,{field:"name",header:"Enterprise"},{body:o(i=>[r("div",Y,[r("img",{src:i.data.photo,alt:i.data.image,class:"product-image"},null,8,z),r("p",null,u(i.data.name),1)])]),_:1}),l(p,{header:"Date"},{body:o(i=>[h(u(a.getDateShipmentInFormat(i.data.dateShipment)),1)]),_:1}),l(p,{field:"price",header:"Price"},{body:o(i=>[h(u(a.formatCurrency(i.data.price)),1)]),_:1}),l(p,{field:"ratingService",header:"Rating Service"},{body:o(i=>[l(S,{modelValue:i.data.score,readonly:!0,cancel:!1},null,8,["modelValue"])]),_:1})]),_:1},8,["value","selection","sortOrder","sortField"]),r("div",K,[y(r("small",G,"*Select a enterprise please",512),[[w,!s.enterprise&&s.submitted]])]),r("div",X,[l(_,{class:"p-button-success text-white w-full m-2",label:"Come Back",icon:"pi pi-angle-left",iconPos:"left",onClick:a.prevPage},null,8,["onClick"]),l(_,{class:"p-button-info text-white w-full m-2",label:"Continue",icon:"pi pi-angle-right",iconPos:"right",onClick:a.nextPage},null,8,["onClick"])])])])]),_:1})])}var se=O(q,[["render",Z],["__scopeId","data-v-dc9030e6"]]);export{se as default};
