var B=Object.defineProperty;var I=(e,s,n)=>s in e?B(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n;var y=(e,s,n)=>(I(e,typeof s!="symbol"?s+"":s,n),n);import{r,e as N}from"./index.esm.f61aadb8.js";import{u as R}from"./index.esm.93a3b1b7.js";import{h as F,_ as q,r as d,o as t,c as a,a as o,t as u,b as i,l as M,k as h,v,d as f,n as $,f as k,g as U,w as W,p as j,e as D,j as C}from"./index.06d337ed.js";class L{constructor(){y(this,"endPoint","/signup")}create(s){return F.post(this.endPoint,s)}}var E=new L;const A={name:"sign-up",setup:()=>({v$:R()}),data:()=>({userTypes:[{label:"Request shipments",type:"customer"},{label:"Make shipments",type:"enterprise"}],isConfirm:!1,submitted:!1,userType:null,name:null,ruc:null,cellPhone:null,email:null,password:null,passwordRepeat:null,description:null,photo:null,accept:null,notMatch:!1,priceBase:null,factorWeight:null,shippingTime:null,lastname:null}),computed:{passwordMatches(){return this.password===this.passwordRepeat}},validations(){return{userType:{required:r},name:{required:r},ruc:{required:r},cellPhone:{required:r},email:{required:r,email:N},password:{required:r,minLength:5},passwordRepeat:{required:r,minLength:5},accept:{required:r}}},methods:{async signUpUser(e){await E.create(e).then(s=>{localStorage.setItem("auth",JSON.stringify(s.data))}).catch(s=>{this.errors.push(s)})},comeBack(){this.isConfirm=!1,this.resetForm()},goToSignIn(){this.isConfirm=!1,this.resetForm(),this.$router.push({name:"sign-in"})},createNewUser(){return this.userType==="customer"?{email:this.email,password:this.password,name:this.name,ruc:this.ruc.split(" ").join(""),phoneNumber:this.cellPhone.split(" ").join(""),description:this.description,photo:this.photo,lastname:this.lastname,subscriptionPlan:0}:{email:this.email,password:this.password,name:this.name,ruc:this.ruc.split(" ").join(""),phoneNumber:this.cellPhone.split(" ").join(""),priceBase:this.priceBase,factorWeight:this.factorWeight,shippingTime:this.shippingTime,description:this.description,photo:this.photo,score:0}},async handleSubmit(e){if(this.submitted=!0,e)if(this.password===this.passwordRepeat){this.notMatch=!1;const s=this.createNewUser();console.log(s),this.userType==="customer"?this.$store.dispatch("auth/registerCustomer",s).then(n=>{this.isConfirm=!0,this.resetForm(),console.log(n.data)}):this.userType==="enterprise"&&this.$store.dispatch("auth/registerEnterprise",s).then(n=>{this.isConfirm=!0,this.resetForm(),console.log(n.data)})}else this.notMatch=!0},resetForm(){this.submitted=!1,this.userType=null,this.name=null,this.ruc=null,this.cellPhone=null,this.email=null,this.password=null,this.passwordRepeat=null,this.accept=null}}},p=e=>(j("data-v-1ac1a32c"),e=e(),D(),e),J={class:"bg-sign-up"},z={class:"bg-white sign-up"},O=p(()=>o("h2",{class:"text-center mb-2"},"Create an ArmorFeed account",-1)),G=p(()=>o("p",{class:"text-center mb-4 mt-0"},"Join and start ordering or shipping.",-1)),H={key:0},K={class:"p-fluid"},Q={class:"font-bold success-color"},X=C(" A confirmation message has been sent to your email "),Y={class:"text-primary email-style"},Z=C(". "),x={class:"field mt-8"},ee={class:"field"},se={class:"p-fluid"},oe={class:"field mx-2"},le={class:"p-error"},ie={class:"field mx-2"},te={class:"p-error"},ae={key:0,class:"field mx-2"},ne={key:1,class:"field mx-2"},re={class:"field mx-2"},de={class:"field mx-2"},pe={class:"field md:flex m-2 md:mb-2"},me={class:"md:mr-1"},ue={class:"p-error"},ce={class:"md:ml-1"},he={class:"p-error"},ve={class:"field mx-2"},fe={class:"p-input-icon-right md:mt-3"},ge=p(()=>o("i",{class:"pi pi-envelope"},null,-1)),be={key:0},we={class:"p-error"},$e={key:1,class:"p-error"},_e={class:"field mx-2"},Ve={key:0},ye={class:"p-error"},ke={key:1,class:"p-error"},Ue={class:"field mx-2"},Ce={key:0,class:"flex align-items-center"},Te=p(()=>o("i",{class:"pi pi-check mr-2"},null,-1)),Se=p(()=>o("p",{class:""},"The passwords match.",-1)),Pe=[Te,Se],Be={key:1,class:"flex align-items-center"},Ie=p(()=>o("i",{class:"pi pi-times mr-2 p-error"},null,-1)),Ne=p(()=>o("p",{class:"p-error"},"Passwords do not match.",-1)),Re=[Ie,Ne],Fe={class:"p-error"},qe={key:0,class:"p-error"},Me={class:"field-checkbox m-2 my-4"},We={class:"field mx-2 md:flex"};function je(e,s,n,De,Le,m){const g=d("pv-button"),T=d("pv-dropdown"),c=d("pv-input-text"),b=d("pv-input-number"),_=d("pv-input-mask"),V=d("pv-password"),S=d("pv-divider"),P=d("pv-checkbox");return t(),a("div",J,[o("div",z,[O,G,e.isConfirm?(t(),a("div",H,[o("div",K,[o("div",null,[o("p",Q," Congratulation "+u(e.name)+", your account has been created! ",1),o("p",null,[X,o("span",Y,u(e.email),1),Z])]),o("div",x,[i(g,{label:"Come back",onClick:m.comeBack},null,8,["onClick"])]),o("div",ee,[i(g,{label:"Sign In",onClick:m.goToSignIn},null,8,["onClick"])])])])):(t(),a("form",{key:1,onSubmit:s[14]||(s[14]=M(l=>m.handleSubmit(!e.v$.$invalid),["prevent"]))},[o("div",se,[o("div",oe,[i(T,{options:e.userTypes,optionLabel:"label",optionValue:"type",modelValue:e.userType,"onUpdate:modelValue":s[0]||(s[0]=l=>e.userType=l),placeholder:"I want..."},null,8,["options","modelValue"]),h(o("small",le," There field is required. ",512),[[v,!e.v$.userType.$model&&e.submitted]])]),o("div",ie,[i(c,{modelValue:e.name,"onUpdate:modelValue":s[1]||(s[1]=l=>e.name=l),placeholder:"Name"},null,8,["modelValue"]),h(o("small",te," Name is required. ",512),[[v,!e.v$.name.$model&&e.submitted]])]),e.userType==="enterprise"?(t(),a("div",ae,[i(b,{class:"mb-2",modelValue:e.priceBase,"onUpdate:modelValue":s[2]||(s[2]=l=>e.priceBase=l),placeholder:"Price Base",mode:"decimal",minFractionDigits:2},null,8,["modelValue"]),i(b,{class:"mb-2",modelValue:e.factorWeight,"onUpdate:modelValue":s[3]||(s[3]=l=>e.factorWeight=l),placeholder:"Factor Weight",mode:"decimal",minFractionDigits:2},null,8,["modelValue"]),i(b,{modelValue:e.shippingTime,"onUpdate:modelValue":s[4]||(s[4]=l=>e.shippingTime=l),placeholder:"Shipping Time"},null,8,["modelValue"])])):e.userType==="customer"?(t(),a("div",ne,[i(c,{modelValue:e.lastname,"onUpdate:modelValue":s[5]||(s[5]=l=>e.lastname=l),placeholder:"Lastname"},null,8,["modelValue"])])):f("",!0),o("div",re,[i(c,{modelValue:e.description,"onUpdate:modelValue":s[6]||(s[6]=l=>e.description=l),placeholder:"Description"},null,8,["modelValue"])]),o("div",de,[i(c,{modelValue:e.photo,"onUpdate:modelValue":s[7]||(s[7]=l=>e.photo=l),placeholder:"Photo"},null,8,["modelValue"])]),o("div",pe,[o("div",me,[i(_,{class:"mb-2 md:mb-0",placeholder:"RUC",modelValue:e.ruc,"onUpdate:modelValue":s[8]||(s[8]=l=>e.ruc=l),mask:"999 999 999 999"},null,8,["modelValue"]),h(o("small",ue," RUC is required. ",512),[[v,!e.v$.ruc.$model&&e.submitted]])]),o("div",ce,[i(_,{class:"my-2 md:my-0",placeholder:"Cell phone number",modelValue:e.cellPhone,"onUpdate:modelValue":s[9]||(s[9]=l=>e.cellPhone=l),mask:"999 999 999"},null,8,["modelValue"]),h(o("small",he," Cell phone is required. ",512),[[v,!e.v$.cellPhone.$model&&e.submitted]])])]),o("div",ve,[o("div",fe,[ge,i(c,{id:"email-error",placeholder:"Email",modelValue:e.v$.email.$model,"onUpdate:modelValue":s[10]||(s[10]=l=>e.v$.email.$model=l),class:$({"p-invalid":e.v$.email.$invalid&&e.submitted}),"aria-describedby":"email-error"},null,8,["modelValue","class"])]),e.v$.email.$error&&e.submitted?(t(),a("span",be,[(t(!0),a(k,null,U(e.v$.email.$errors,(l,w)=>(t(),a("span",{id:"email-error",key:w},[o("small",we,u(l.$message),1)]))),128))])):e.v$.email.$invalid&&e.submitted||e.v$.email.$pending.$response?(t(),a("small",$e,u(e.v$.email.required.$message.replace("Value","Email")),1)):f("",!0)]),o("div",_e,[i(V,{modelValue:e.password,"onUpdate:modelValue":s[11]||(s[11]=l=>e.password=l),placeholder:"Password",class:"w-full"},null,8,["modelValue"]),e.v$.password.$error&&e.submitted?(t(),a("span",Ve,[(t(!0),a(k,null,U(e.v$.password.$errors,(l,w)=>(t(),a("span",{id:"email-error",key:w},[o("small",ye,u(l.$message),1)]))),128))])):e.v$.password.$invalid&&e.submitted||e.v$.password.$pending.$response?(t(),a("small",ke,u(e.v$.password.required.$message.replace("Value","Password")),1)):f("",!0)]),o("div",Ue,[i(V,{class:"w-full",placeholder:"Password repeat",modelValue:e.passwordRepeat,"onUpdate:modelValue":s[12]||(s[12]=l=>e.passwordRepeat=l)},{footer:W(()=>[i(S),m.passwordMatches&&e.password!=null?(t(),a("div",Ce,Pe)):!m.passwordMatches&&e.password!=null?(t(),a("div",Be,Re)):f("",!0)]),_:1},8,["modelValue"]),h(o("small",Fe,"Password is required.",512),[[v,!e.v$.passwordRepeat.$model&&e.submitted]]),e.notMatch?(t(),a("p",qe,"Passwords do not match.")):f("",!0)]),o("div",Me,[i(P,{id:"accept",name:"accept",value:"Accept",modelValue:e.v$.accept.$model,"onUpdate:modelValue":s[13]||(s[13]=l=>e.v$.accept.$model=l),class:$({"p-invalid":e.v$.accept.$invalid&&e.submitted})},null,8,["modelValue","class"]),o("label",{for:"accept",class:$({"p-error":e.v$.accept.$invalid&&e.submitted})},"I agree to the terms and conditions*",2)]),o("div",We,[i(g,{label:"Come back",class:"mb-2 md:mb-0 md:mr-2 p-button-info",onClick:m.goToSignIn},null,8,["onClick"]),i(g,{label:"Sign Up",type:"submit",class:"p-button-success"})])])],32))])])}var Oe=q(A,[["render",je],["__scopeId","data-v-1ac1a32c"]]);export{Oe as default};
