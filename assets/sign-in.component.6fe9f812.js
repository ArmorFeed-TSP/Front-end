import{r as u}from"./index.esm.f61aadb8.js";import{u as w}from"./index.esm.93a3b1b7.js";import{_ as $,r,o as p,c as m,a as e,l as V,b as i,w as c,d as y,k as _,v as h,n as k,j as a}from"./index.06d337ed.js";const x={name:"sign-in",setup:()=>({v$:w()}),data(){return{email:null,submitted:!1,password:null,notFound:!1}},validations(){return{email:{required:u},password:{required:u}}},methods:{async handleSubmit(t){if(this.submitted=!0,this.notFound=!1,t){const s=this.loginDto();this.$store.dispatch("auth/login",s).then(o=>{this.$dataTransfer.user=o.data,this.$emit("user-logged")}).catch(o=>{document.getElementById("password").focus(),console.log(o.message),o.request.status===0||o.request.status===500?alert("Email is not valid"):alert("An error has occurred, contact the area in charge")})}},loginDto(){return{email:this.email,password:this.password}}}},E={class:"bg-sign-in"},C={class:"sign-in bg-white"},F=e("h1",{class:"text-center font-bold mb-5"},"ArmorFeed",-1),I={class:"p-fluid"},S={class:"field"},B={key:0,class:"text-lg line-height-3 p-error"},D=a(" The account or password is incorrect. If you don't remember the account, "),N=a(" reset it now. "),q={class:"p-float-label p-input-icon-right"},T=e("i",{class:"pi pi-envelope"},null,-1),A={class:"p-error"},U={class:"field mb-2"},j={class:"p-error"},z={class:"field pt-4"},M={class:"text-center pt-2"},P=a(" Forgot your password? "),R=a(" Don't have an account? "),G=a(" Click here. ");function H(t,s,o,J,n,v){const d=r("router-link"),f=r("pv-input-text"),g=r("pv-password"),b=r("pv-button");return p(),m("div",E,[e("div",C,[e("form",{onSubmit:s[2]||(s[2]=V(l=>v.handleSubmit(!t.v$.$invalid),["prevent"]))},[F,e("div",I,[e("div",S,[n.notFound?(p(),m("p",B,[D,i(d,{class:"no-underline",to:""},{default:c(()=>[N]),_:1})])):y("",!0),e("div",q,[T,i(f,{id:"email",modelValue:t.v$.email.$model,"onUpdate:modelValue":s[0]||(s[0]=l=>t.v$.email.$model=l),"aria-describedby":"email-error",placeholder:"Email"},null,8,["modelValue"])]),_(e("small",A," Enter the email please. ",512),[[h,!t.v$.email.$model&&n.submitted]])]),e("div",U,[i(g,{id:"password",placeholder:"Password",modelValue:n.password,"onUpdate:modelValue":s[1]||(s[1]=l=>n.password=l),feedback:!1,class:k({"p-error":n.submitted})},null,8,["modelValue","class"]),_(e("small",j," Enter the password please. ",512),[[h,!t.v$.password.$model&&n.submitted]])]),e("div",z,[i(b,{label:"Sign In",type:"submit"})]),e("div",M,[i(d,{to:"/",class:"mt-0 no-underline"},{default:c(()=>[P]),_:1}),e("p",null,[R,i(d,{class:"no-underline",to:"/sign-up"},{default:c(()=>[G]),_:1})])])])],32)])])}var Q=$(x,[["render",H]]);export{Q as default};
